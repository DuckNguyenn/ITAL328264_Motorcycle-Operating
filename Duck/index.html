<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>H·ªá th·ªëng gi√°m s√°t v·∫≠n h√†nh xe m√°y</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <div class="app">
    <header class="header">
      <div class="header-inner">
        <div class="header-left">
          <div class="header-brand">
            <div class="brand-top">Phuong va nhung nguoi ban</div>
          </div>
        </div>
        <div class="header-right">
          <span class="clock-label">Th·ªùi gian th·ª±c:</span>
          <span id="realtime-clock" class="clock-value">--/--/---- --:--:--</span>
        </div>
      </div>
    </header>

    <div class="layout">
      <aside class="sidebar">
        <div class="sidebar-logo-block">
          <img src="image/HCMUTE.jpg" class="sidebar-logo" alt="Logo" onerror="this.style.display='none'"/>
          <div class="sidebar-logo-text">Dashboard</div>
        </div>
        <nav class="sidebar-nav">
          <button class="nav-item active" data-view="dashboard">Dashboard</button>
          <button class="nav-item" data-view="history">L·ªãch s·ª≠</button>
        </nav>
      </aside>

      <main class="content">
        <section class="view active" data-view="dashboard">
          <div class="card-row">
            <div class="card info-card">
              <div class="card-title">V·∫≠n t·ªëc hi·ªán t·∫°i</div>
              <div class="card-main">
                <div class="card-value" id="speed-current-detail">--</div>
                <div class="card-unit">km/h</div>
              </div>
              <div class="card-sub">
                <div class="speed-bar"><div class="speed-bar-fill" id="speed-bar-fill"></div></div>
              </div>
              <div class="card-badge" id="speed-badge">--</div>
              <div class="card-status-text" id="speed-status-text">--</div>
            </div>

            <div class="card info-card">
              <div class="card-title">G√≥c nghi√™ng</div>
              <div class="card-main tilt-main">
                <div class="tilt-visual-wrapper"><div class="tilt-bike" id="tilt-bike"></div></div>
                <div class="tilt-info">
                  <div class="card-value small" id="tilt-current">--¬∞</div>
                </div>
              </div>
              <div class="card-badge" id="tilt-badge">--</div>
              <div class="card-status-text" id="tilt-status-text">--</div>
            </div>

            <div class="card info-card">
              <div class="card-title">Nhi·ªát ƒë·ªô ƒë·ªông c∆°</div>
              <div class="card-main">
                <div class="card-value" id="temp-current-detail">--</div>
                <div class="card-unit">¬∞C</div>
              </div>
              <div class="card-badge" id="temp-badge">--</div>
              <div class="card-status-text" id="temp-status-text">Ch∆∞a c√≥ d·ªØ li·ªáu</div>
            </div>
          </div>

          <div class="chart-row">
            <div class="card chart-card">
              <div class="card-title">Bi·ªÉu ƒë·ªì v·∫≠n t·ªëc</div>
              <div style="height: 260px; width: 100%;"><canvas id="speed-chart-canvas"></canvas></div>
            </div>
            <div class="card chart-card">
              <div class="card-title">Bi·ªÉu ƒë·ªì nhi·ªát ƒë·ªô</div>
              <div style="height: 260px; width: 100%;"><canvas id="temp-chart-canvas"></canvas></div>
            </div>
          </div>

          <div class="card summary-card">
            <div class="card-title">B·∫£ng tham chi·∫øu an to√†n</div>
            <table class="summary-table">
              <thead><tr><th>Th√¥ng s·ªë</th><th>Gi√° tr·ªã</th><th>Ng∆∞·ª°ng an to√†n</th><th>Tr·∫°ng th√°i</th></tr></thead>
              <tbody>
                <tr><td>V·∫≠n t·ªëc</td><td id="summary-speed-value">--</td><td>0-60 km/h</td><td id="summary-speed-status">--</td></tr>
                <tr><td>G√≥c nghi√™ng</td><td id="summary-tilt-value">--</td><td>< 25¬∞</td><td id="summary-tilt-status">--</td></tr>
                <tr><td>Nhi·ªát ƒë·ªô</td><td id="summary-temp-value">--</td><td>< 90¬∞C</td><td id="summary-temp-status">--</td></tr>
              </tbody>
            </table>
          </div>

          <div class="card control-card">
            <div class="card-title">ƒêi·ªÅu khi·ªÉn thi·∫øt b·ªã</div>
            <div class="control-row">
                <div class="control-info">
                  <span class="control-icon">üì¢</span>
                  <span class="control-label">C√≤i</span>
                </div>
                <label class="switch">
                  <input type="checkbox" id="horn-toggle">
                  <span class="slider"></span>
                </label>
            </div>
            <div id="horn-status-text" class="status-text-small" style="color: #ef4444;">
              Tr·∫°ng th√°i: T·∫ÆT (OFF)
            </div>
          </div>
          <div class="sos-wrapper"><button id="sos-button" class="sos-btn">üö® G·ªçi c·ª©u h·ªô</button></div>
        </section>

        <section class="view" data-view="history">
          <div class="card history-filter-card">
             <div class="card-title">B·ªô l·ªçc d·ªØ li·ªáu</div>
             <div class="history-filters-container">
                <div class="filter-group">
                  <label>T·ª´ ng√†y/gi·ªù:</label>
                  <input type="datetime-local" id="filter-start" class="filter-input">
                </div>
                <div class="filter-group">
                  <label>ƒê·∫øn ng√†y/gi·ªù:</label>
                  <input type="datetime-local" id="filter-end" class="filter-input">
                </div>
                <div class="filter-group">
                  <label>Tr·∫°ng th√°i:</label>
                  <select id="filter-status" class="filter-input">
                    <option value="all">-- T·∫•t c·∫£ --</option>
                    <option value="safe">An to√†n</option>
                    <option value="warning">C·∫£nh b√°o</option>
                    <option value="danger">Nguy hi·ªÉm</option>
                  </select>
                </div>
                <div class="filter-actions">
                  <button id="history-apply" class="btn-filter">üîç L·ªçc</button>
                  <button id="history-reset" class="btn-reset">‚Ü∫ Reset</button>
                </div>
             </div>
          </div>

          <div class="card history-table-card">
            <div class="card-title">L·ªãch s·ª≠ ƒëo <span id="history-count"></span></div>
            <div class="history-table-wrapper">
              <table class="history-table">
                <thead><tr><th>Th·ªùi gian</th><th>V·∫≠n t·ªëc</th><th>G√≥c nghi√™ng</th><th>Nhi·ªát ƒë·ªô</th><th>Tr·∫°ng th√°i</th></tr></thead>
                <tbody id="history-body"></tbody>
              </table>
            </div>
          </div>
        </section>

        <footer class="app-footer">
          <div class="footer-content">
            <img src="image/Duc.jpg" alt="Duc" class="footer-avatar" onerror="this.src='https://via.placeholder.com/60'"/>
            <div class="footer-info">
              <div class="footer-item">
                <span class="footer-label">Email:</span>
                <a href="mailto:23139012@student.hcmute.edu.vn">23139012@student.hcmute.edu.vn</a>
              </div>
              <div class="footer-item">
                <span class="footer-label">SƒêT:</span>
                <a href="tel:0972723011">0972723011</a>
              </div>
            </div>
          </div>
          <div class="footer-copyright">
            Duck Nguyen
          </div>
        </footer>

      </main>
    </div>

    <div id="chatbox">
        <div id="chatbox-header">
            <div class="chatbox-header-left">
                <span>Chat</span>
                <span class="chatbox-status-dot"></span>
            </div>
            <div class="chatbox-header-right">
                <button id="chatbox-clear" title="X√≥a l·ªãch s·ª≠ tr√≤ chuy·ªán">üóë</button> 
                <button id="chatbox-toggle">_</button>
            </div>
        </div>
        <div id="chatbox-messages"></div>
        <div id="chatbox-input-area">
            <input type="text" id="chatbox-input" placeholder="H·ªèi g√¨ ƒë√≥..." />
            <button id="chatbox-send">G·ª≠i</button>
        </div>
    </div>
    <button id="chatbox-button">üí¨</button>
  </div>

  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/paho-mqtt/1.0.1/mqttws31.min.js" type="text/javascript"></script>
  <script src="app.js"></script>
</body>
</html>